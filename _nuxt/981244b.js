(window.webpackJsonp=window.webpackJsonp||[]).push([[17,3],{356:function(t,e,o){var content=o(358);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(127).default)("7acdc986",content,!0,{sourceMap:!1})},357:function(t,e,o){"use strict";o(356)},358:function(t,e,o){var r=o(126)((function(i){return i[1]}));r.push([t.i,".ts-mask *{color:var(--ts-static-gray-100)!important}",""]),r.locals={},t.exports=r},359:function(t,e,o){"use strict";o.r(e);var r={props:{loadingText:{type:String,default:"讀取中..."}}},n=(o(357),o(48)),component=Object(n.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"ts-mask is-centered"},[e("div",{staticClass:"ts-loading is-large"}),t._v(" "),e("span",[t._v(t._s(t.loadingText))])])}),[],!1,null,null,null);e.default=component.exports},379:function(t,e,o){var content=o(409);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(127).default)("0573ce5e",content,!0,{sourceMap:!1})},408:function(t,e,o){"use strict";o(379)},409:function(t,e,o){var r=o(126)((function(i){return i[1]}));r.push([t.i,"@import url(https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400&display=swap);"]),r.push([t.i,".timetable-container{align-items:center;display:flex;justify-content:center}.timetable-container>.ts-box{border-radius:var(--ts-border-radius-container)}#widgetDialog span{color:var(--ts-primary-500)}.compare-course{font-size:.8rem;margin-top:.25rem}.compare .ts-box .ts-content.is-secondary{font-size:.6rem}.compare .ts-box small{font-size:.7rem;opacity:.7}#page-my .ad.fixed{height:400px;position:fixed;right:50px;top:calc(50% - 200px);width:350px}#page-my .ad.fixed .ts-text:last-child{padding-top:125px!important}.dropdown-item-input{position:relative;width:100%}.dropdown-item-input input{height:100%;left:0;opacity:0;position:absolute;top:0;width:100%}.ts-select.theme-select:after{color:var(--ts-static-gray-100)}.ts-select.theme-select.is-light:after{color:var(--ts-static-gray-600)}.picker-container{align-items:center;display:flex;flex-direction:column;justify-content:center;padding:2rem}.picker-container .ts-input{font-family:monospace;width:9rem}.picker-container .ts-input input{text-align:center}@media (prefers-color-scheme:light){#page-my .sidebar .ts-button.is-secondary,#page-my .sidebar .ts-range input{background:var(--ts-gray-400)}.is-dark #page-my .sidebar .ts-button.is-secondary,.is-dark #page-my .sidebar .ts-range input{background:var(--ts-gray-100)}}.is-light #page-my .sidebar .ts-button.is-secondary,.is-light #page-my .sidebar .ts-range input{background:var(--ts-gray-400)}.widget-demo{aspect-ratio:1/1;background:var(--ts-gray-100);border-radius:1rem;display:flex;flex-direction:column;justify-content:center;padding:1.6rem}.widget-demo .pre{font-size:.9rem}.widget-demo .title{font-size:1.2rem;font-weight:700}.widget-demo .info{font-size:1.05rem}#page-my .ts-wrap>.ts-text+.ts-checkbox{margin-top:0}#page-my .ts-wrap>.ts-text+.ts-checkbox input{margin-top:4px}",""]),r.locals={},t.exports=r},436:function(t,e,o){"use strict";o.r(e);o(103),o(41),o(363),o(49),o(50),o(71),o(33),o(15),o(56),o(360),o(42),o(72),o(73),o(59),o(68),o(69);var r=o(25),n=o(10),c=(o(399),o(102),o(232),o(401),o(402),o(37),o(28),o(43),o(44),o(243),o(57),o(38),o(45),o(88),o(403),o(406),o(239),o(70),o(58)),l=o(407);function d(t,e){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=function(t,a){if(t){if("string"==typeof t)return m(t,a);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?m(t,a):void 0}}(t))||e&&t&&"number"==typeof t.length){o&&(t=o);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,u=!1;return{s:function(){o=o.call(t)},n:function(){var t=o.next();return a=t.done,t},e:function(t){u=!0,c=t},f:function(){try{a||null==o.return||o.return()}finally{if(u)throw c}}}}function m(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,o=Array(a);e<a;e++)o[e]=t[e];return o}function h(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,r)}return o}function v(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?h(Object(o),!0).forEach((function(e){Object(r.a)(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):h(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var f={asyncData:function(t){return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$axios,t.params,t.payload;case 1:case"end":return e.stop()}}),e)})))()},head:function(){return{title:"我的課表 | 明志科技大學選課小幫手",meta:[{hid:"og:title",property:"og:title",content:"我的課表 | 明志科技大學選課小幫手"},{hid:"og:url",property:"og:url",content:"https://mcut-course.com/"+this.$router.currentRoute.path},{hid:"og:url",property:"og:url",content:"https://mcut-course.com"+this.$router.currentRoute.path},{hid:"og:image",property:"og:image",content:"https://og.mcut-course.com"+this.$router.currentRoute.path+".jpg?t=1771600809441"},{hid:"twitter:image",name:"twitter:image",content:"https://og.mcut-course.com"+this.$router.currentRoute.path+".jpg?t=1771600809441"}]}},data:function(){return{adWidth:null,profileName:null,profileImage:null,time_section_full:["1","2","3","4","4.5","5","6","7","8","8.5","9","10","11","12"],showMobileSidebar:!1,loading:!0,loading_get:!1,maxEndSection:8,savedCourses:[],myCourses:[],gridCells:[],editingCourse:null,editingAction:null,defaultCourse:{id:"",name:"",classroom:"",start:-1,end:-1,day:-1},myCoursesSetting:{showColTitle:!0,showRowTitle:!0,showColLine:!0,showRowLine:!0,showCourseClassroom:!0,showCourseTime:!0,tableBorder:32,theme:1,background:"white",backgroundColor:"#FFFFFF",backgroundColorHex:""},ctx:null,scriptableCodeFile:"",importCodeFile:"",message:null,messageTimer:null,widgetBackgroundGradient:!0,widgetBackgroundColor:"#487eb0",widgetBackgroundColor2:"#341f97",widgetColor:"#ffffff",backgroundImage:null,timeInfo:{.5:["07:00","07:50"],1:["08:00","08:50"],2:["09:00","09:50"],3:["10:00","10:50"],4:["11:00","11:50"],4.5:["12:00","12:50"],5:["13:00","13:50"],6:["14:00","14:50"],7:["15:00","15:50"],8:["16:00","16:50"],8.5:["17:00","17:50"],9:["18:40","19:25"],10:["19:30","20:15"],11:["20:25","21:10"],12:["21:15","22:00"]},icsStartDate:"",icsEndDate:"",icsReminders:[10],backgrounds:[{id:"white",name:"白色",color:"#FFF"},{id:"dark-gray",name:"深灰色",color:"#333"},{id:"custom",name:"自訂顏色",color:"#FFF"},{id:"image",name:"自訂圖片",color:"#FFF"}],themes:[{id:3,type:"light",courseColor:["#DDD"],titleColor:"#333",textColor:"#444"},{id:4,type:"dark",courseColor:["#444"],titleColor:"#FFF",textColor:"#F2F2F2"},{id:1,type:"light",courseColor:["#F8BBD0","#FFCDD2","#FFE0B2","#FFF9C4","#F0F4C3","#C8E6C9","#B2EBF2","#BBDEFB","#C5CAE9","#D1C4E9","#D7CCC8","#DDD"],titleColor:"#333",textColor:"#444"},{id:5,type:"light",courseColor:["#f1c0e8","#ffcfd2","#fde4cf","#fbf8cc","#b9fbc0","#98f5e1","#8eecf5","#90dbf4","#a3c4f3","#cfbaf0"],titleColor:"#333",textColor:"#444"},{id:8,type:"light",courseColor:["#fec5bb","#fcd5ce","#fae1dd","#f8edeb","#e8e8e4","#d8e2dc","#ece4db","#ffe5d9","#ffd7ba","#fec89a"],titleColor:"#333",textColor:"#444"},{id:10,type:"light",courseColor:["#eae4e9","#fff1e6","#fde2e4","#fad2e1","#e2ece9","#bee1e6","#f0efeb","#dfe7fd","#cddafd"],titleColor:["#333","#333","#333","#333","#333","#333","#333","#333","#333"],textColor:["#444","#444","#444","#444","#444","#444","#444","#444","#444"]},{id:6,type:"dark",courseColor:["#e3f2fd","#bbdefb","#90caf9","#64b5f6","#42a5f5","#2196f3","#1e88e5","#1976d2","#1565c0","#0d47a1"],titleColor:["#023e8a","#023e8a","#023e8a","#023e8a","#023e8a","#fff","#fff","#fff","#fff","#fff"],textColor:["#023e8a","#023e8a","#023e8a","#023e8a","#023e8a","#fff","#fff","#fff","#fff","#fff"]},{id:7,type:"dark",courseColor:["#d8f3dc","#b7e4c7","#95d5b2","#74c69d","#52b788","#40916c","#2d6a4f","#1b4332"],titleColor:["#081c15","#081c15","#081c15","#081c15","#fff","#fff","#fff","#fff"],textColor:["#1b4332","#1b4332","#1b4332","#1b4332","#fff","#fff","#fff","#fff"]},{id:9,type:"dark",courseColor:["#d9ed92","#b5e48c","#99d98c","#76c893","#52b69a","#34a0a4","#168aad","#1a759f","#1e6091","#184e77"],titleColor:["#333","#333","#333","#333","#333","#333","#fff","#fff","#fff","#fff"],textColor:["#444","#444","#444","#444","#444","#444","#eee","#eee","#eee","#eee"]},{id:11,type:"light",courseColor:["#f72585","#b5179e","#7209b7","#560bad","#480ca8","#3a0ca3","#3f37c9","#4361ee","#4895ef","#4cc9f0"],titleColor:["#fff","#fff","#fff","#fff","#fff","#fff","#fff","#fff","#333","#333"],textColor:["#eee","#eee","#eee","#eee","#eee","#eee","#eee","#eee","#444","#444"]},{id:14,type:"dark",courseColor:["#ff7b00","#ff8800","#ff9500","#ffa200","#ffb700","#ffc300","#ffd000","#ffdd00","#ffea00"],titleColor:["#333","#333","#333","#333","#333","#333","#333","#333","#333"],textColor:["#444","#444","#444","#444","#444","#444","#444","#444","#444"]},{id:12,type:"dark",courseColor:["#582f0e","#7f4f24","#936639","#a68a64","#b6ad90","#c2c5aa","#a4ac86","#656d4a","#414833","#333d29"],titleColor:["#fff","#fff","#333","#333","#333","#333","#333","#fff","#fff","#fff"],textColor:["#eee","#eee","#444","#444","#444","#444","#444","#eee","#eee","#eee"]},{id:13,type:"light",courseColor:["#f94144","#f3722c","#f8961e","#f9844a","#f9c74f","#90be6d","#43aa8b","#4d908e","#577590","#277da1"],titleColor:["#333","#333","#333","#333","#333","#333","#333","#333","#333","#333"],textColor:["#444","#444","#444","#444","#444","#444","#444","#444","#444","#444"]},{id:2,type:"dark",courseColor:["#C0392B","#E74C3C","#E67E22","#F9A825","#2ECC71","#27AE60","#1ABC9C","#3498DB","#2980B9","#8E44AD","#6D4C41","#444"],titleColor:"#FFF",textColor:"#F2F2F2"}]}},computed:v(v({},Object(c.c)({showAd:function(t){return t.show_ad}})),{},{time_section:function(){var t=this,e=["1","2","3","4","5","6","7","8"];return this.myCourses.forEach((function(o){if(!(o.time[0]>5)){var r=o.time[1].split("~");if(e.push(r[0]),r[0]!=r[1])for(var s=t.time_section_full.indexOf(r[0]);s<=t.time_section_full.indexOf(r[1]);s++)e.push(t.time_section_full[s])}})),e=e.filter((function(section,t){return e.indexOf(section)===t})).map((function(section){return parseFloat(section)})).sort((function(a,b){return a-b})),e},week_text:function(){return["一","二","三","四","五"]},used_secion:function(){var t=this,e={1:[],2:[],3:[],4:[],5:[]};return this.myCourses.forEach((function(o){if(!(o.time[0]>5)){var r=o.time[1].split("~");if(e[o.time[0]].push(r[0]),r[0]!=r[1])for(var s=t.time_section_full.indexOf(r[0]);s<=t.time_section_full.indexOf(r[1]);s++)e[o.time[0]].push(t.time_section_full[s])}})),e},isIos:function(){return"undefined"!=typeof navigator&&/iPhone|iPad|iPod/i.test(navigator.userAgent)},scriptableCode:function(){var t={1:[],2:[],3:[],4:[],5:[]};return this.myCourses.forEach((function(e){e.time[0]>5||t[e.time[0]].push({n:e.name,c:e.classroom,s:e.time[1].split("~")[0],p:e.time[1].replace("~","-"),i:e.name!=e.originalName||12!=e.id.length||e.id.includes("ALT")?"":e.id})})),'const color=["'.concat(this.widgetBackgroundColor.replace("#",""),'","').concat((this.widgetBackgroundGradient?this.widgetBackgroundColor2:this.widgetBackgroundColor).replace("#",""),'","').concat(this.widgetColor.replace("#",""),'"];')+this.scriptableCodeFile.replace("__DATA__",encodeURIComponent(JSON.stringify(t||[])))},icsWeek:function(){if(this.icsStartDate&&this.icsEndDate){var t=new Date(this.icsStartDate),e=new Date(this.icsEndDate),o=Math.abs(e-t),r=Math.ceil(o/864e5);return Math.ceil(r/7)}return 0},icsUrl:function(){return"https://api.mcut-course.com/ics.php?openExternalBrowser=1&d="+this.icsStartDate+","+this.icsEndDate+"&c="+encodeURIComponent(JSON.stringify(this.myCourses.map((function(t){return[t.id,t.name,t.classroom,t.time[0],t.time[1]]}))))+"&r="+this.icsReminders.join(",")}}),methods:{getColorBar:function(t){if(!t||t.length<2)return t&&t[0]?t[0]:"#DDD";for(var e=100/t.length,o=e,r="",i=0;i<t.length;i++)r+=t[i]+" "+o+"%,",i<t.length-1&&(r+=t[i+1]+" "+(o+.1)+"%,",o+=e);return"linear-gradient(to right, "+r.slice(0,-1)+")"},loadFonts:function(){return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,document.fonts.load('14px "Noto Sans TC"');case 2:case"end":return t.stop()}}),t)})))()},showWidget:function(){this.message=null,document.getElementById("widgetDialog").showModal()},copyCode:function(t){var e=this,o=document.getElementById("code"+t);navigator.clipboard.writeText(o.textContent).then((function(){})).catch((function(){document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o)})),this.message=["success",'<span style="color: var(--ts-positive-400)">程式碼已複製！</span>'],this.messageTimer&&clearTimeout(this.messageTimer),this.messageTimer=setTimeout((function(){e.message=null}),3e3)},chooseBackground:function(t){var e=this;if(this.myCoursesSetting.background=t,"image"!=t&&this.clearBackgroundImage(),"custom"==t){this.myCoursesSetting.backgroundColorHex=this.myCoursesSetting.backgroundColor,document.getElementById("colorDialog").showModal();var o=document.getElementById("picker");o&&(o.innerHTML="");var r=new l.a.ColorPicker("#picker",{color:this.myCoursesSetting.backgroundColor,width:280,layout:[{component:l.a.ui.Box,options:{}},{component:l.a.ui.Slider,options:{sliderType:"hue"}}]});o.colorPicker=r,r.on("color:change",(function(t){e.myCoursesSetting.backgroundColor=t.hexString,e.myCoursesSetting.backgroundColorHex=t.hexString.toUpperCase(),e.updateTimetable(!1)})),r.on("input:end",(function(t){}))}this.updateTimetable(!1)},updateBackgroundColor:function(){var t=this.myCoursesSetting.backgroundColorHex.trim().toUpperCase();if(6===t.length&&/^[0-9A-F]{6}$/.test(t)&&(t="#"+t,this.myCoursesSetting.backgroundColorHex=t),/^#[0-9A-F]{6}$/.test(t)){this.myCoursesSetting.backgroundColor=t;var e=document.getElementById("picker");if(e&&e.querySelector(".IroColorPicker"))try{var o=e.colorPicker;o&&o.color&&(o.color.hexString=t)}catch(t){console.warn("無法同步 colorPicker 顏色:",t)}this.updateTimetable(!1)}},validateAndFormatColor:function(){var t=this.myCoursesSetting.backgroundColorHex.trim().toUpperCase();if(t=t.replace(/^#+/,""),/^[0-9A-F]{6}$/.test(t)){this.myCoursesSetting.backgroundColorHex="#"+t,this.myCoursesSetting.backgroundColor="#"+t,this.updateTimetable(!1);var e=document.getElementById("picker");if(e&&e.colorPicker)try{e.colorPicker.color.hexString="#"+t}catch(t){console.warn("無法同步 colorPicker 顏色:",t)}}else this.myCoursesSetting.backgroundColorHex=this.myCoursesSetting.backgroundColor},chooseTheme:function(t){this.myCoursesSetting.theme=t,this.updateTimetable(!1)},checkSection:function(){parseFloat(this.editingCourse.start)>parseFloat(this.editingCourse.end)&&(this.editingCourse.end=this.editingCourse.start)},clearAll:function(){var t=this;this.$swal({icon:"question",title:"清除個人課表？",confirmButtonText:"清除",cancelButtonText:"取消",showCancelButton:!0,confirmButtonColor:"var(--ts-negative-600)"}).then((function(e){e.isConfirmed&&(t.myCourses=[],t.updateTimetable())}))},importFromUrl:function(){var t=this,e=JSON.parse(decodeURIComponent(this.$route.query.import)),data=[];e.forEach((function(t){if(6==t[1].trim().length){if(1!=t[2].trim().length||parseInt(t[2])>5)return;if(!t[3].includes(".")||!t[4].includes(".")||Number.isNaN(parseFloat(t[3]))||Number.isNaN(parseFloat(t[4])))return;data.push({name:t[0],classroom:t[5],time:[t[2],t[3].replace(".0","")+"~"+t[4].replace(".0","")],id:""})}else if(12==t[1].trim().length){if(1!=t[3].trim().length||parseInt(t[3])>5)return;if(!t[4].includes(".")||!t[5].includes(".")||Number.isNaN(parseFloat(t[4]))||Number.isNaN(parseFloat(t[5])))return;data.push({name:t[0],originalName:t[0],classroom:t[6],time:[t[3],t[4].replace(".0","")+"~"+t[5].replace(".0","")],id:t[1]})}}));var o=0,r=0;data.forEach((function(e){var time=e.time;if(!time[1].includes("0.5")){for(var n=!1,s=t.time_section_full.indexOf(time[1].split("~")[0]);s<=t.time_section_full.indexOf(time[1].split("~")[1]);s++)if(t.used_secion[time[0]]&&t.used_secion[time[0]].includes(t.time_section_full[s])){n=!0;break}n?r++:(t.myCourses.push({name:e.name.split("(")[0],originalName:e.name.split("(")[0],classroom:e.classroom,id:e.id,time:time}),o++)}}));var n=[];o>0&&n.push("已匯入 ".concat(o," 門課程")),r>0&&n.push("有 ".concat(r," 門課程因衝堂無法匯入")),n.length>0&&this.$swal({title:n.join("，"),icon:0==r?"success":"warning",toast:!0,timer:3e3,timerProgressBar:!0,position:"bottom-start",showConfirmButton:!1}),o>0&&(this.sortCourse(),this.updateTimetable()),this.$router.replace({query:{}})},importFromSaved:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var o,r,n,c,data,l,d,m,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.loading=!0,0!==(o=t.savedCourses).length){e.next=4;break}return e.abrupt("return");case 4:if(t.currentTerm=o[0].substring(0,3)+"-"+o[0].substring(3,4),r=(new Date).getTime(),n=localStorage["courseData_"+t.currentTerm],c=localStorage["courseDataTime_"+t.currentTerm],data=[],!(n&&c&&r-c<18e5)){e.next=13;break}data=JSON.parse(n),e.next=24;break;case 13:return e.prev=13,e.next=16,t.$axios.get("https://api.mcut-course.com/list.php?term="+t.currentTerm);case 16:l=e.sent,localStorage["courseData_"+t.currentTerm]=JSON.stringify(l.data),localStorage["courseDataTime_"+t.currentTerm]=r,data=l.data,e.next=24;break;case 22:e.prev=22,e.t0=e.catch(13);case 24:d=0,m=0,data.course.forEach((function(e){o.includes(e.id)&&e.time.forEach((function(time){if(!(time[1].includes("0.5")||parseInt(time[0])>5)){for(var o=!1,s=t.time_section_full.indexOf(time[1].split("~")[0]);s<=t.time_section_full.indexOf(time[1].split("~")[1]);s++)if(t.used_secion[time[0]]&&t.used_secion[time[0]].includes(t.time_section_full[s])){o=!0;break}o?m++:(t.myCourses.push({name:e.name.split("(")[0],originalName:e.name.split("(")[0],classroom:"",id:e.id,time:time}),d++)}}))})),h=[],d>0&&h.push("已匯入 ".concat(d," 門課程")),m>0&&h.push("有 ".concat(m," 門課程因衝堂無法匯入")),h.length>0&&t.$swal({title:h.join("，"),icon:0==m?"success":"warning",toast:!0,timer:3e3,timerProgressBar:!0,position:"bottom-start",showConfirmButton:!1}),d>0&&(t.sortCourse(),t.updateTimetable()),t.loading=!1;case 32:case"end":return e.stop()}}),e,null,[[13,22]])})))()},setCanvasSize:function(){this.loading=!1;var t,e,canvas=document.getElementById("timetableCanvas");this.ctx=canvas.getContext("2d"),window.innerHeight>window.innerWidth?e=16*(t=window.innerWidth-28)/9:t=9*(e=window.innerHeight-130)/16,canvas.width=1080,canvas.height=1920,canvas.style.width=t+"px",canvas.style.height=e+"px",this.adWidth=(document.querySelector(".cell.main").clientWidth-t)/2-100,this.updateTimetable(!1)},updateTimetable:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.myCourses=this.myCourses.map((function(t){return delete t.editing,delete t.isSame,t})),e&&localStorage.auth_key&&this.$axios.post("https://api.mcut-course.com/user/?action=update","my="+encodeURIComponent(JSON.stringify(this.myCourses)),{headers:{"Content-Type":"application/x-www-form-urlencoded",authorization:localStorage.auth_key}}).then((function(t){localStorage.myCourseSync=t.data.updatedAt})).catch((function(t){localStorage.auth_key="",localStorage.profile_image="",location.reload()})),localStorage.myCourses=JSON.stringify(this.myCourses),localStorage.myCoursesSetting=JSON.stringify(this.myCoursesSetting),CanvasRenderingContext2D.prototype.drawRoundedRect||(CanvasRenderingContext2D.prototype.drawRoundedRect=function(t,e,o,r,n){n=Math.min(n,o/2,r/2),this.beginPath(),this.moveTo(t+n,e),this.lineTo(t+o-n,e),this.arcTo(t+o,e,t+o,e+n,n),this.lineTo(t+o,e+r-n),this.arcTo(t+o,e+r,t+o-n,e+r,n),this.lineTo(t+n,e+r),this.arcTo(t,e+r,t,e+r-n,n),this.lineTo(t,e+n),this.arcTo(t,e,t+n,e,n),this.closePath(),this.fill()}),CanvasRenderingContext2D.prototype.wrapText=function(t,e,o,n,c,l,m,h){var v,f=0,C=this.canvas._tableBorder,y=d(e);try{for(y.s();!(v=y.n()).done;){var text=v.value;0==f?(r.font=32-.05*C+"px Noto Sans TC",r.fillStyle=Array.isArray(m.titleColor)?m.titleColor[h]:m.titleColor,r.textAlign="left",r.textBaseline="middle"):(r.font=24-.05*C+"px Noto Sans TC",r.fillStyle=Array.isArray(m.textColor)?m.textColor[h]:m.textColor,r.textAlign="left",r.textBaseline="middle");for(var _=(text||"").split(""),line="",i=0;i<_.length;i++){var w=line+_[i];t.measureText(w).width>c&&i>0?(t.fillText(line,o,n),line=_[i],n+=l-.05*C):line=w}t.fillText(line,o,n),n+=l-.05*C,f++}}catch(t){y.e(t)}finally{y.f()}};var o=this.themes.find((function(e){return e.id===t.myCoursesSetting.theme})),r=this.ctx;if(r.canvas._tableBorder=this.myCoursesSetting.tableBorder||32,r.clearRect(0,0,r.canvas.width,r.canvas.height),this.backgroundImage){var img=new Image;img.onload=function(){var e=Math.max(r.canvas.width/img.width,r.canvas.height/img.height),n=(r.canvas.width-img.width*e)/2,c=(r.canvas.height-img.height*e)/2;r.drawImage(img,n,c,img.width*e,img.height*e),t.drawTimetableContent(r,o)},img.src=this.backgroundImage}else r.fillStyle="custom"==this.myCoursesSetting.background?this.myCoursesSetting.backgroundColor:this.backgrounds.find((function(b){return b.id===t.myCoursesSetting.background})).color,r.fillRect(0,0,r.canvas.width,r.canvas.height),this.drawTimetableContent(r,o)},drawTimetableContent:function(t,e){var o=this,r=this.time_section.length,n=this.week_text.length,c=this.myCoursesSetting.showColTitle?.035*(t.canvas.height-2*this.myCoursesSetting.tableBorder):0,l=(this.myCoursesSetting.showColTitle?.965:1)*(t.canvas.height-2*this.myCoursesSetting.tableBorder)/r,d=this.myCoursesSetting.showRowTitle?.05*(t.canvas.width-2*this.myCoursesSetting.tableBorder):0,m=(this.myCoursesSetting.showRowTitle?.95:1)*(t.canvas.width-2*this.myCoursesSetting.tableBorder)/n;t.translate(this.myCoursesSetting.tableBorder,this.myCoursesSetting.tableBorder),t.strokeStyle="rgba(50%, 50%, 50%, 0.2)",this.gridCells=[];for(var i=0;i<=r;i++)if(this.myCoursesSetting.showRowLine&&i<r&&(this.myCoursesSetting.showColTitle||0!=i)&&(t.shadowColor="transparent",t.lineWidth=2,t.beginPath(),t.moveTo(0,i*l+c),t.lineTo(t.canvas.width-2*this.myCoursesSetting.tableBorder,i*l+c),t.stroke()),this.myCoursesSetting.showRowTitle&&i<r){t.font=(String(this.time_section[i]).includes(".5")?26:30)+"px Noto Sans TC";var h=d/2+this.myCoursesSetting.tableBorder,v=i*l+l/2+c+this.myCoursesSetting.tableBorder,f=this.getPixelColor(t,h,v);t.fillStyle=this.getContrastColor(f),t.shadowColor="#888"===this.getContrastColor(f)?"rgba(255, 255, 255, 0.7)":"rgba(0, 0, 0, 0.7)",t.shadowBlur=3,t.shadowOffsetX=1,t.shadowOffsetY=1,t.textAlign="center",t.textBaseline="middle",t.fillText(this.time_section[i],d/2,i*l+l/2+c)}for(var C=0;C<=n;C++)if(this.myCoursesSetting.showColLine&&C<n&&(this.myCoursesSetting.showRowTitle||0!=C)&&(t.shadowColor="transparent",t.lineWidth=2,t.beginPath(),t.moveTo(C*m+d,0),t.lineTo(C*m+d,t.canvas.height-2*this.myCoursesSetting.tableBorder),t.stroke()),this.myCoursesSetting.showColTitle&&C<n){t.font="32px Noto Sans TC";var y=C*m+m/2+d+this.myCoursesSetting.tableBorder,_=c/2+this.myCoursesSetting.tableBorder,w=this.getPixelColor(t,y,_);t.fillStyle=this.getContrastColor(w),t.shadowColor="#888"===this.getContrastColor(w)?"rgba(255, 255, 255, 0.7)":"rgba(0, 0, 0, 0.7)",t.shadowBlur=3,t.shadowOffsetX=1,t.shadowOffsetY=1,t.textAlign="center",t.textBaseline="middle",t.fillText(this.week_text[C],C*m+m/2+d,c/2)}for(var S=0;S<r;S++)for(var k=0;k<n;k++){var x=k*m+d,B=S*l+c;this.gridCells.push({row:S,col:k,x:x,y:B,width:m,height:l})}t.shadowColor="transparent",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0,this.myCourses.forEach((function(r){var n=o.time_section.indexOf(parseFloat(r.time[1].split("~")[0]))+1,h=o.time_section.indexOf(parseFloat(r.time[1].split("~")[1]))+1;if(!isNaN(n)&&!isNaN(h)){var v=parseFloat(r.time[0]);if(!(isNaN(n)||isNaN(h)||isNaN(v))){var f=(v-1)*m+d,C=(n-1)*l+c,y=m,_=(h-n+1)*l,w=o.myCourses.map((function(t){return t.name}));w=w.filter((function(t,e){return w.indexOf(t)===e})),t.globalAlpha=.8,t.fillStyle=e.courseColor[w.indexOf(r.name)%e.courseColor.length],t.drawRoundedRect(f+8,C+8,y-16,_-16,m/20),t.globalAlpha=1;var S=[r.name];o.myCoursesSetting.showCourseTime&&S.push(o.timeInfo[r.time[1].split("~")[0]][0]+" ~ "+o.timeInfo[r.time[1].split("~")[1]][1]),o.myCoursesSetting.showCourseClassroom&&S.push(r.classroom),t.wrapText(t,S,f+20,C+35,m-35,38,e,w.indexOf(r.name)%e.courseColor.length)}}})),t.translate(-this.myCoursesSetting.tableBorder,-this.myCoursesSetting.tableBorder)},downloadImage:function(){var t=this,e=this.backgrounds.find((function(b){return b.id===t.myCoursesSetting.background})).id;"custom"==e&&(e=this.myCoursesSetting.background.replace("#","").replace("-","_")),this.$gtag("event","button_click",{button_name:"download_image",action:"click",category:"background-"+this.myCoursesSetting.background+"-theme-"+this.myCoursesSetting.theme});var canvas=document.getElementById("timetableCanvas");window.innerWidth>768?canvas.toBlob((function(t){var link=document.createElement("a");link.download="課表.png",link.href=URL.createObjectURL(t),link.click(),URL.revokeObjectURL(link.href)}),"image/png"):this.$swal({title:"長按圖片即可下載",html:'<img style="width: 80%;" src="'+canvas.toDataURL("image/png")+'" alt="課表"/>',showConfirmButton:!1,showCloseButton:!0})},getGridCellAtPosition:function(t,e){var canvas=document.getElementById("timetableCanvas"),rect=canvas.getBoundingClientRect(),o=canvas.width/rect.width,r=canvas.height/rect.height;return t=t*o-this.myCoursesSetting.tableBorder,e=e*r-this.myCoursesSetting.tableBorder,this.gridCells.find((function(o){return t>=o.x&&t<=o.x+o.width&&e>=o.y&&e<=o.y+o.height}))},clickCell:function(col,t){var e=this;if(this.myCourses.forEach((function(t){t.editing=!1})),-1==col&&-1==t)this.editingCourse=Object.freeze(this.defaultCourse),this.editingAction="new";else if(this.used_secion[col+1].includes(String(this.time_section[t]))){var o=null;this.myCourses.forEach((function(t){t.editing=!1})),this.myCourses.forEach((function(r){if(!o&&r.time[0]===String(col+1))for(var n=r.time[1].split("~"),s=e.time_section_full.indexOf(String(n[0]));s<=e.time_section_full.indexOf(String(n[1]));s++)if(e.time_section_full[s]===String(e.time_section[t]))return o=r,void(r.editing=!0)})),o&&(this.editingCourse={id:o.id||"",name:o.name,originalName:o.originalName,classroom:o.classroom,day:parseInt(o.time[0])-1,start:o.time[1].split("~")[0],end:o.time[1].split("~")[1]},this.editingAction="edit")}else this.editingCourse={id:"",name:"",classroom:"",day:col,start:t+1,end:t+1},this.editingAction="new";document.getElementById("editCourseDialog").showModal()},showImportDialog:function(){document.getElementById("importDialog").showModal()},closeDialog:function(){this.message=null,this.editingCourse=Object.freeze(this.defaultCourse),this.editingAction=null,["editCourseDialog","widgetDialog","importDialog","icsDialog","colorDialog"].forEach((function(dialog){document.getElementById(dialog).close()}))},editCourse:function(){if(this.editingCourse.name)if(-1!==this.editingCourse.day)if(-1!==this.editingCourse.start&&-1!==this.editingCourse.end){var t=this.myCourses.find((function(t){return t.editing}))||null,e=[];if("edit"===this.editingAction&&t)for(var s=this.time_section_full.indexOf(String(t.time[1].split("~")[0]));s<=this.time_section_full.indexOf(String(t.time[1].split("~")[1]));s++)e.push(this.time_section_full[s]);for(var o=this.time_section_full.indexOf(String(this.editingCourse.start));o<=this.time_section_full.indexOf(String(this.editingCourse.end));o++)if(this.used_secion[this.editingCourse.day+1].includes(this.time_section_full[o])&&!e.includes(this.time_section_full[o]))return void(this.message=["error","這個時段已經有別的課程了！"]);t?(t.name=this.editingCourse.name,t.classroom=this.editingCourse.classroom,t.time[0]=(this.editingCourse.day+1).toString(),t.time[1]=this.editingCourse.start+"~"+this.editingCourse.end):this.myCourses.push({id:"",name:this.editingCourse.name,classroom:this.editingCourse.classroom,time:[(this.editingCourse.day+1).toString(),this.editingCourse.start+"~"+this.editingCourse.end]}),this.message=null,this.sortCourse(),this.updateTimetable(),document.getElementById("editCourseDialog").close()}else this.message=["error","請選擇節次"];else this.message=["error","請選擇星期"];else this.message=["error","請輸入課程名稱"]},deleteCourse:function(){var t=this.myCourses.find((function(t){return t.editing}))||null;t&&(this.myCourses=this.myCourses.filter((function(e){return e!==t})),this.updateTimetable(),document.getElementById("editCourseDialog").close())},sortCourse:function(){this.myCourses.sort((function(a,b){return a.time[0]===b.time[0]?parseFloat(a.time[1].split("~")[0])-parseFloat(b.time[1].split("~")[0]):parseFloat(a.time[0])-parseFloat(b.time[0])}))},compareCourse:function(data){var t=this,e=Object.freeze(this.myCourses),o=Object.freeze(data.my);return e.forEach((function(t){o.forEach((function(e){t.id===e.id&&t.name===e.name&&t.classroom===e.classroom&&t.time[0]===e.time[0]&&t.time[1]===e.time[1]&&(t.isSame=!0,e.isSame=!0)}))})),'<div class="ts-grid is-compact is-stretched compare" style="text-align:left">\t\t\t\t<div class="column is-8-wide"><div class="ts-box"><div class="ts-content is-dense">\t\t\t\t\t<span class="ts-badge is-small is-dense" style="background:var(--ts-static-gray-500);color:var(--ts-static-gray-50)">當前課表 ('+e.length+")</span>"+e.map((function(e){return'<div class="compare-course '+(e.isSame?"":" has-diff")+'">'+e.name.split("(")[0]+" <small>("+t.week_text[e.time[0]-1]+") "+(e.time[1].split("~")[0]==e.time[1].split("~")[1]?e.time[1].split("~")[0]:e.time[1])+(e.classroom?" "+e.classroom:"")+"</small></div>"})).join("")+'</div></div></div>\t\t\t\t<div class="column is-8-wide"><div class="ts-box"><div class="ts-content is-dense">\t\t\t\t\t<span class="ts-badge is-small is-dense" style="background:var(--ts-static-primary-600);color:var(--ts-static-gray-50)">儲存於帳號中的課表 ('+o.length+")</span><br><small>儲存於 "+this.formatTime(data.updatedAt)+"</small><br>"+o.map((function(e){return'<div class="compare-course '+(e.isSame?"":" has-diff")+'">'+e.name.split("(")[0]+" <small>("+t.week_text[e.time[0]-1]+") "+(e.time[1].split("~")[0]==e.time[1].split("~")[1]?e.time[1].split("~")[0]:e.time[1])+(e.classroom?" "+e.classroom:"")+"</small></div>"})).join("")+'</div></div></div>\t\t\t</div><br><div class="ts-text is-description is-start-aligned">\t\t\t\t這可能是因為您先前有在別的裝置登入並修改課表，但跟目前登入前的課表不一致。紅色代表有差異的課程，請選擇一個同步方式。\t\t\t</div>'},formatTime:function(time){var t=new Date(time);return t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()+" "+t.getHours().toString().padStart(2,"0")+":"+t.getMinutes().toString().padStart(2,"0")},initIndexedDB:function(){return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){var o=indexedDB.open("mcut-course",1);o.onerror=function(){return e("無法開啟 IndexedDB")},o.onupgradeneeded=function(t){var e=t.target.result;e.objectStoreNames.contains("settings")||e.createObjectStore("settings")},o.onsuccess=function(){return t(o.result)}})));case 1:case"end":return t.stop()}}),t)})))()},saveBackgroundToIndexedDB:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function o(){var r;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,e.initIndexedDB();case 2:return r=o.sent,o.abrupt("return",new Promise((function(e,o){var n=r.transaction(["settings"],"readwrite").objectStore("settings").put(t,"backgroundImage");n.onerror=function(){return o("儲存圖片失敗")},n.onsuccess=function(){return e()}})));case 4:case"end":return o.stop()}}),o)})))()},loadBackgroundFromIndexedDB:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initIndexedDB();case 2:return o=e.sent,e.abrupt("return",new Promise((function(t,e){var r=o.transaction(["settings"],"readonly").objectStore("settings").get("backgroundImage");r.onerror=function(){return e("讀取圖片失敗")},r.onsuccess=function(){return t(r.result)}})));case 4:case"end":return e.stop()}}),e)})))()},handleBackgroundImage:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function o(){var r,c;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:(r=t.target.files[0])&&((c=new FileReader).onload=function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(o){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.backgroundImage=o.target.result,t.prev=1,t.next=4,e.saveBackgroundToIndexedDB(o.target.result);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.error("儲存背景圖片失敗:",t.t0);case 9:e.updateTimetable(!1);case 10:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}(),c.readAsDataURL(r));case 2:case"end":return o.stop()}}),o)})))()},clearBackgroundImage:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var o,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.backgroundImage=null,e.prev=1,e.next=4,t.initIndexedDB();case 4:return o=e.sent,r=o.transaction(["settings"],"readwrite"),n=r.objectStore("settings"),e.next=9,n.delete("backgroundImage");case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error("清除背景圖片失敗:",e.t0);case 14:t.updateTimetable(!1);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})))()},getPixelColor:function(t,e,o){try{var r=t.getImageData(e,o,1,1).data;return{r:r[0],g:r[1],b:r[2]}}catch(t){return console.error("無法獲取像素顏色:",t),{r:128,g:128,b:128}}},getContrastColor:function(t){return(.299*t.r+.587*t.g+.114*t.b)/255>.7?"#888":"#DDD"},saveToCalendar:function(){return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:document.getElementById("icsDialog").showModal();case 1:case"end":return t.stop()}}),t)})))()}},mounted:function(){var t=this;window.addEventListener("resize",(function(){t.setCanvasSize()})),this.editingCourse=Object.freeze(this.defaultCourse),this.savedCourses=JSON.parse(localStorage.getItem("savedCourse")||"[]"),this.$axios.get("/scriptable.min.js?v=5").then((function(e){t.scriptableCodeFile=e.data})),this.$axios.get("/import.js").then((function(e){t.importCodeFile=e.data}));try{this.myCourses=JSON.parse(localStorage.myCourses)}catch(t){}localStorage.auth_key&&(this.loading_get=!0,this.$axios.get("https://api.mcut-course.com/user/?action=get&my",{headers:{authorization:localStorage.auth_key}}).then((function(e){if(t.loading_get=!1,!isNaN(new Date(localStorage.myCourseSync).getTime())&&new Date(localStorage.myCourseSync).getTime()<new Date(e.data.updatedAt).getTime())t.myCourses=e.data.my,localStorage.myCourseSync=e.data.updatedAt,t.updateTimetable(!1);else if(0===e.data.my.length)t.updateTimetable();else if(0===t.myCourses.length)t.myCourses=e.data.my,localStorage.myCourseSync=e.data.updatedAt,t.updateTimetable(!1);else{var o=!1;if(t.myCourses.length!==e.data.my.length)o=!0;else for(var i=0;i<t.myCourses.length;i++)if(t.myCourses[i].id!==e.data.my[i].id||t.myCourses[i].name!==e.data.my[i].name||t.myCourses[i].classroom!==e.data.my[i].classroom||t.myCourses[i].time[0]!==e.data.my[i].time[0]||t.myCourses[i].time[1]!==e.data.my[i].time[1]){o=!0;break}o?t.$swal({icon:"warning",title:"當前課表與儲存於帳號中的課表不一致",html:t.compareCourse(e.data),confirmButtonText:"清除當前課表，使用儲存於帳號中的課表",cancelButtonText:"清除儲存於帳號中的課表，使用當前課表",showCancelButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,focusConfirm:!1,reverseButtons:!0,didOpen:function(){document.querySelectorAll(".swal2-actions button")[0].blur()}}).then((function(o){o.isConfirmed?(t.myCourses=e.data.my,localStorage.myCourses=JSON.stringify(t.myCourses),t.updateTimetable(!1)):t.updateTimetable()})):localStorage.myCourseSync=e.data.updatedAt}}))),this.myCourses.forEach((function(t){t.editing=!1}));try{var e=JSON.parse(localStorage.myCoursesSetting);Object.keys(e).forEach((function(o){void 0!==e[o]&&(t.myCoursesSetting[o]=e[o])})),void 0===e.background&&(console.log(this.backgrounds),"light"===this.themes.find((function(t){return t.id===e.theme})).type?(this.myCoursesSetting.background="white",this.myCoursesSetting.backgroundColor="#FFFFFF"):(this.myCoursesSetting.background="dark-gray",this.myCoursesSetting.backgroundColor="#333333"))}catch(t){}this.loadFonts().then((function(){t.setCanvasSize();var canvas=document.getElementById("timetableCanvas");canvas.addEventListener("click",(function(e){var rect=canvas.getBoundingClientRect(),o=e.clientX-rect.left,r=e.clientY-rect.top,n=t.getGridCellAtPosition(o,r);n&&t.clickCell(n.col,n.row)})),t.$route.query.import&&t.importFromUrl(),t.loadBackgroundFromIndexedDB().then((function(e){e&&(t.backgroundImage=e,t.updateTimetable(!1))})).catch((function(t){return console.error("載入背景圖片失敗:",t)}))}));var o=new Date,r=o.getDay(),n=0===r?6:r-1,c=new Date(o);c.setDate(o.getDate()-n);var l=function(t){var e=t.getFullYear(),o=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return"".concat(e,"-").concat(o,"-").concat(r)};this.icsStartDate=l(c);var d=new Date(c);d.setDate(c.getDate()+4),this.icsEndDate=l(d),["editCourseDialog","widgetDialog","importDialog","icsDialog"].forEach((function(dialog){document.getElementById(dialog).addEventListener("click",(function(t){"DIALOG"===t.target.tagName&&document.getElementById(dialog).close()}))}))}},C=f,y=(o(408),o(48)),component=Object(y.a)(C,(function(){var t=this,e=this,o=e._self._c;return o("div",{staticClass:"cell is-scrollable is-fluid is-horizontal",attrs:{id:"page-my"}},[o("div",{staticClass:"cell is-tertiary is-scrollable sidebar",class:{show:e.showMobileSidebar}},[o("div",{staticClass:"ts-content"},[o("div",{staticClass:"ts-wrap is-vertical has-top-padded is-relaxed"},[o("button",{staticClass:"ts-close is-large mobile-only close-sidebar",attrs:{"aria-label":"關閉側邊欄"},on:{click:function(t){e.showMobileSidebar=!e.showMobileSidebar}}}),e._v(" "),o("div",[o("div",{staticClass:"ts-text is-label has-bottom-padded-small"},[e._v("我的課程")]),e._v(" "),o("div",{staticClass:"ts-wrap is-dense"},[o("button",{staticClass:"ts-button is-secondary is-small is-fluid is-start-icon",on:{click:function(t){return e.showImportDialog()}}},[o("span",{staticClass:"ts-icon is-file-import-icon"}),e._v("\n\t\t\t\t\t\t\t從學校系統匯入\n\t\t\t\t\t\t")]),e._v(" "),o("button",{directives:[{name:"show",rawName:"v-show",value:e.savedCourses.length>0,expression:"savedCourses.length > 0"}],staticClass:"ts-button is-secondary is-small is-fluid is-start-icon",on:{click:function(t){return e.importFromSaved()}}},[o("span",{staticClass:"ts-icon is-star-icon"}),e._v("\n\t\t\t\t\t\t\t從「收藏的課程」匯入\n\t\t\t\t\t\t")]),e._v(" "),o("div",{staticClass:"ts-grid",staticStyle:{width:"100%"}},[o("div",{staticClass:"column is-8-wide"},[o("button",{staticClass:"ts-button is-secondary is-small is-fluid is-start-icon",on:{click:function(t){return e.clickCell(-1,-1)}}},[o("span",{staticClass:"ts-icon is-plus-icon"}),e._v("\n\t\t\t\t\t\t\t\t\t新增\n\t\t\t\t\t\t\t\t")])]),e._v(" "),o("div",{staticClass:"column is-8-wide"},[o("button",{staticClass:"ts-button is-negative is-secondary is-small is-fluid is-start-icon",on:{click:function(t){return e.clearAll()}}},[o("span",{staticClass:"ts-icon is-trash-icon"}),e._v("\n\t\t\t\t\t\t\t\t\t清除\n\t\t\t\t\t\t\t\t")])])])])]),e._v(" "),o("div",[o("div",{staticClass:"ts-text is-label has-bottom-spaced-small"},[e._v("背景")]),e._v(" "),o("div",{staticClass:"ts-select is-fluid has-bottom-spaced-small"},[o("div",{staticClass:"content",attrs:{"data-dropdown":"background-dropdown"}},["image"==e.backgrounds.find((function(b){return b.id===e.myCoursesSetting.background})).id?o("span",{staticClass:"ts-icon is-circular is-image-icon"}):"custom"==e.backgrounds.find((function(b){return b.id===e.myCoursesSetting.background})).id?o("span",{staticClass:"ts-icon is-circular is-square-icon",style:{background:e.myCoursesSetting.backgroundColor}}):o("span",{staticClass:"ts-icon is-circular is-square-icon",style:{background:e.backgrounds.find((function(b){return b.id===e.myCoursesSetting.background})).color}}),e._v("\n\t\t\t\t\t\t\t"+e._s(e.backgrounds.find((function(b){return b.id===e.myCoursesSetting.background})).name)+"\n\t\t\t\t\t\t")]),e._v(" "),o("div",{staticClass:"ts-dropdown is-dense",attrs:{"data-position":"bottom-start",id:"background-dropdown"}},e._l(e.backgrounds,(function(t){return o("div",{staticClass:"item is-indented",class:{"is-selected":t.id===e.myCoursesSetting.background,"dropdown-item-input":"image"==t.id||"custom"==t.id},on:{click:function(o){return e.chooseBackground(t.id)}}},["image"==t.id?[o("span",{staticClass:"ts-icon is-circular is-image-icon"}),e._v("\n\t\t\t\t\t\t\t\t\t"+e._s(null==e.backgroundImage?"選擇圖片":"重新選擇圖片")+"\n\t\t\t\t\t\t\t\t\t"),o("input",{attrs:{type:"file",accept:"image/png, image/jpeg, image/jpg"},on:{change:e.handleBackgroundImage}})]:"custom"==t.id?[o("span",{staticClass:"ts-icon is-circular is-square-icon",style:{background:e.myCoursesSetting.backgroundColor}}),e._v("\n\t\t\t\t\t\t\t\t\t"+e._s(t.name)+"\n\t\t\t\t\t\t\t\t")]:[o("span",{staticClass:"ts-icon is-circular is-square-icon",style:{background:t.color}}),e._v("\n\t\t\t\t\t\t\t\t\t"+e._s(t.name)+"\n\t\t\t\t\t\t\t\t")]],2)})),0)])]),e._v(" "),o("div",[o("div",{staticClass:"ts-text is-label has-bottom-padded-small"},[e._v("主題")]),e._v(" "),o("div",{staticClass:"ts-select theme-select is-fluid",class:{"is-light":"light"===e.themes.find((function(t){return t.id===e.myCoursesSetting.theme})).type}},[o("div",{staticClass:"content",staticStyle:{"border-radius":"var(--ts-border-radius-element)",height:"100%"},style:{background:e.getColorBar(e.themes.find((function(t){return t.id===e.myCoursesSetting.theme})).courseColor)},attrs:{"data-dropdown":"theme-dropdown"}},[e._v("\n\t\t\t\t\t\t\t \n\t\t\t\t\t\t")]),e._v(" "),o("div",{staticClass:"ts-dropdown",attrs:{"data-position":"bottom-start",id:"theme-dropdown"}},e._l(e.themes,(function(t){return o("div",{staticClass:"item is-indented",class:{"is-selected":t.id===e.myCoursesSetting.theme},style:{background:e.getColorBar(t.courseColor)},on:{click:function(o){return e.chooseTheme(t.id)}}},[e._v("\n\t\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t")])})),0)])]),e._v(" "),o("div",[o("div",{staticClass:"ts-text is-label has-bottom-padded-small"},[e._v("顯示/隱藏")]),e._v(" "),o("div",{staticClass:"ts-wrap is-vertical is-compact"},[o("div",{staticClass:"ts-wrap"},[o("label",{staticClass:"ts-checkbox"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.myCoursesSetting.showRowLine,expression:"myCoursesSetting.showRowLine"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.myCoursesSetting.showRowLine)?e._i(e.myCoursesSetting.showRowLine,null)>-1:e.myCoursesSetting.showRowLine},on:{change:[function(t){var o=e.myCoursesSetting.showRowLine,r=t.target,n=!!r.checked;if(Array.isArray(o)){var c=e._i(o,null);r.checked?c<0&&e.$set(e.myCoursesSetting,"showRowLine",o.concat([null])):c>-1&&e.$set(e.myCoursesSetting,"showRowLine",o.slice(0,c).concat(o.slice(c+1)))}else e.$set(e.myCoursesSetting,"showRowLine",n)},function(t){return e.updateTimetable(!1)}]}}),e._v("\n\t\t\t\t\t\t\t\t水平格線\n\t\t\t\t\t\t\t")]),e._v(" "),o("label",{staticClass:"ts-checkbox"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.myCoursesSetting.showColLine,expression:"myCoursesSetting.showColLine"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.myCoursesSetting.showColLine)?e._i(e.myCoursesSetting.showColLine,null)>-1:e.myCoursesSetting.showColLine},on:{change:[function(t){var o=e.myCoursesSetting.showColLine,r=t.target,n=!!r.checked;if(Array.isArray(o)){var c=e._i(o,null);r.checked?c<0&&e.$set(e.myCoursesSetting,"showColLine",o.concat([null])):c>-1&&e.$set(e.myCoursesSetting,"showColLine",o.slice(0,c).concat(o.slice(c+1)))}else e.$set(e.myCoursesSetting,"showColLine",n)},function(t){return e.updateTimetable(!1)}]}}),e._v("\n\t\t\t\t\t\t\t\t垂直格線\n\t\t\t\t\t\t\t")])]),e._v(" "),o("div",{staticClass:"ts-wrap"},[o("label",{staticClass:"ts-checkbox"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.myCoursesSetting.showRowTitle,expression:"myCoursesSetting.showRowTitle"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.myCoursesSetting.showRowTitle)?e._i(e.myCoursesSetting.showRowTitle,null)>-1:e.myCoursesSetting.showRowTitle},on:{change:[function(t){var o=e.myCoursesSetting.showRowTitle,r=t.target,n=!!r.checked;if(Array.isArray(o)){var c=e._i(o,null);r.checked?c<0&&e.$set(e.myCoursesSetting,"showRowTitle",o.concat([null])):c>-1&&e.$set(e.myCoursesSetting,"showRowTitle",o.slice(0,c).concat(o.slice(c+1)))}else e.$set(e.myCoursesSetting,"showRowTitle",n)},function(t){return e.updateTimetable(!1)}]}}),e._v("\n\t\t\t\t\t\t\t\t節次\n\t\t\t\t\t\t\t")]),e._v(" "),o("label",{staticClass:"ts-checkbox"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.myCoursesSetting.showColTitle,expression:"myCoursesSetting.showColTitle"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.myCoursesSetting.showColTitle)?e._i(e.myCoursesSetting.showColTitle,null)>-1:e.myCoursesSetting.showColTitle},on:{change:[function(t){var o=e.myCoursesSetting.showColTitle,r=t.target,n=!!r.checked;if(Array.isArray(o)){var c=e._i(o,null);r.checked?c<0&&e.$set(e.myCoursesSetting,"showColTitle",o.concat([null])):c>-1&&e.$set(e.myCoursesSetting,"showColTitle",o.slice(0,c).concat(o.slice(c+1)))}else e.$set(e.myCoursesSetting,"showColTitle",n)},function(t){return e.updateTimetable(!1)}]}}),e._v("\n\t\t\t\t\t\t\t\t星期\n\t\t\t\t\t\t\t")])]),e._v(" "),o("label",{staticClass:"ts-checkbox"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.myCoursesSetting.showCourseTime,expression:"myCoursesSetting.showCourseTime"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.myCoursesSetting.showCourseTime)?e._i(e.myCoursesSetting.showCourseTime,null)>-1:e.myCoursesSetting.showCourseTime},on:{change:[function(t){var o=e.myCoursesSetting.showCourseTime,r=t.target,n=!!r.checked;if(Array.isArray(o)){var c=e._i(o,null);r.checked?c<0&&e.$set(e.myCoursesSetting,"showCourseTime",o.concat([null])):c>-1&&e.$set(e.myCoursesSetting,"showCourseTime",o.slice(0,c).concat(o.slice(c+1)))}else e.$set(e.myCoursesSetting,"showCourseTime",n)},function(t){return e.updateTimetable(!1)}]}}),e._v("\n\t\t\t\t\t\t\t上課時間\n\t\t\t\t\t\t")]),e._v(" "),o("label",{staticClass:"ts-checkbox"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.myCoursesSetting.showCourseClassroom,expression:"myCoursesSetting.showCourseClassroom"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.myCoursesSetting.showCourseClassroom)?e._i(e.myCoursesSetting.showCourseClassroom,null)>-1:e.myCoursesSetting.showCourseClassroom},on:{change:[function(t){var o=e.myCoursesSetting.showCourseClassroom,r=t.target,n=!!r.checked;if(Array.isArray(o)){var c=e._i(o,null);r.checked?c<0&&e.$set(e.myCoursesSetting,"showCourseClassroom",o.concat([null])):c>-1&&e.$set(e.myCoursesSetting,"showCourseClassroom",o.slice(0,c).concat(o.slice(c+1)))}else e.$set(e.myCoursesSetting,"showCourseClassroom",n)},function(t){return e.updateTimetable(!1)}]}}),e._v("\n\t\t\t\t\t\t\t上課地點 / 備註\n\t\t\t\t\t\t")])])]),e._v(" "),o("div",[o("div",{staticClass:"ts-text is-label has-bottom-padded-small"},[e._v("外框寬度 "),o("small",[e._v("("+e._s(Math.round(e.myCoursesSetting.tableBorder/128*1e3)/10)+"%)")])]),e._v(" "),o("div",{staticClass:"ts-range"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.myCoursesSetting.tableBorder,expression:"myCoursesSetting.tableBorder"}],staticStyle:{width:"100%"},attrs:{type:"range",min:"0",max:"128"},domProps:{value:e.myCoursesSetting.tableBorder},on:{change:function(t){return e.updateTimetable(!1)},__r:function(t){return e.$set(e.myCoursesSetting,"tableBorder",t.target.value)}}})])]),e._v(" "),o("div",{staticClass:"ts-wrap is-dense mobile-hidden"},[o("button",{staticClass:"ts-button is-small is-fluid is-start-icon",on:{click:function(t){return e.downloadImage()}}},[o("span",{staticClass:"ts-icon is-download-icon"}),e._v("\n\t\t\t\t\t\t下載圖片\n\t\t\t\t\t")]),e._v(" "),o("button",{directives:[{name:"show",rawName:"v-show",value:e.isIos,expression:"isIos"}],staticClass:"ts-button is-small is-fluid is-start-icon",class:{"is-disabled":0==e.myCourses.length},on:{click:function(t){return e.showWidget()}}},[o("span",{staticClass:"ts-icon is-mobile-screen-icon"}),e._v("\n\t\t\t\t\t\t安裝 iOS 小工具\n\t\t\t\t\t")]),e._v(" "),o("a",{staticClass:"ts-button is-small is-fluid is-start-icon",class:{"is-disabled":0==e.myCourses.length},on:{click:function(t){return e.saveToCalendar()}}},[o("span",{staticClass:"ts-icon is-calendar-days-icon"}),e._v("\n\t\t\t\t\t\t存到行事曆\n\t\t\t\t\t")])]),e._v(" "),e._m(0)])])]),e._v(" "),o("div",{staticClass:"cell is-secondary is-fluid is-scrollable main",staticStyle:{"min-height":"100%"}},[o("div",{staticClass:"ts-container mobile-only"},[e._m(1),e._v(" "),o("button",{staticClass:"ts-button is-fluid is-secondary is-start-icon",on:{click:function(t){e.showMobileSidebar=!e.showMobileSidebar}}},[o("span",{staticClass:"ts-icon is-table-cells-icon"}),e._v("\n\t\t\t\t課表設定\n\t\t\t")]),e._v(" "),o("div",{staticClass:"ts-grid is-evenly-divided has-top-spaced"},[o("div",{staticClass:"column"},[o("button",{staticClass:"ts-button is-fluid is-start-icon",on:{click:function(t){return e.downloadImage()}}},[o("span",{staticClass:"ts-icon is-download-icon"}),e._v("\n\t\t\t\t\t\t下載圖片\n\t\t\t\t\t")])]),e._v(" "),o("div",{staticClass:"column"},[o("button",{staticClass:"ts-button is-fluid is-start-icon",class:{"is-disabled":0==e.myCourses.length},on:{click:function(t){return e.showWidget()}}},[o("span",{staticClass:"ts-icon is-mobile-screen-icon"}),e._v("\n\t\t\t\t\t\tiOS 小工具\n\t\t\t\t\t")])]),e._v(" "),o("div",{staticClass:"column"},[o("button",{staticClass:"ts-button is-fluid is-start-icon",class:{"is-disabled":0==e.myCourses.length},on:{click:function(t){return e.saveToCalendar()}}},[o("span",{staticClass:"ts-icon is-calendar-days-icon"}),e._v("\n\t\t\t\t\t\t存到行事曆\n\t\t\t\t\t")])])])]),e._v(" "),o("div",{staticClass:"ts-container has-top-padded has-bottom-padded is-fitted"},[o("div",{staticClass:"timetable-container",attrs:{id:"timetable-container"}},[o("div",{staticClass:"ts-box",style:{backgroundColor:this.themes.find((function(e){return e.id===t.myCoursesSetting.theme})).backgroundColor}},[o("canvas",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],attrs:{id:"timetableCanvas"}})])]),e._v(" "),!e.loading&&e.showAd?o("div",{staticClass:"ts-box ad is-hollowed box-mobile-spaced has-top-spaced-large",class:{fixed:e.adWidth>280},staticStyle:{border:"4px dashed var(--ts-gray-300)!important"},style:{width:e.adWidth>280?e.adWidth+"px":"calc(100% - 2rem)"}},[e._m(2)]):e._e()]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.showMobileSidebar,expression:"showMobileSidebar"}],staticClass:"ts-mask",on:{click:function(t){e.showMobileSidebar=!e.showMobileSidebar}}})]),e._v(" "),o("dialog",{staticClass:"ts-modal is-large",attrs:{id:"editCourseDialog"}},[o("div",{staticClass:"content"},[o("div",{staticClass:"ts-content"},[o("div",{staticClass:"ts-grid"},[o("div",{staticClass:"column is-fluid"},[o("div",{staticClass:"ts-header"},[e._v(e._s("new"===e.editingAction?"新增課程":"修改課程"))])]),e._v(" "),o("div",{staticClass:"column"},[o("button",{staticClass:"ts-close is-large is-secondary",attrs:{"aria-label":"關閉此彈出視窗"},on:{click:function(t){return e.closeDialog()}}})])])]),e._v(" "),o("div",{staticClass:"ts-divider"}),e._v(" "),e.editingCourse?o("div",{staticClass:"ts-content"},[e.editingCourse.id&&12==e.editingCourse.id.length&&!e.editingCourse.id.includes("ALT")?o("NuxtLink",{staticClass:"ts-button is-fluid is-secondary is-start-icon has-bottom-spaced-large",attrs:{target:"_blank",to:"/course/".concat(e.editingCourse.id.substring(0,4),"/").concat(e.editingCourse.id.substring(4,8),"/").concat(e.editingCourse.id.substring(8),"/")}},[o("span",{staticClass:"ts-icon is-list-check-icon"}),e._v("\n\t\t\t\t\t查看課程詳細資料\n\t\t\t\t")]):e._e(),e._v(" "),e.message?o("div",{staticClass:"ts-box is-start-indicated has-bottom-spaced-large",class:{"is-negative":"error"===e.message[0]}},[o("div",{staticClass:"ts-content"},[o("div",{staticClass:"ts-header"},[e._v(e._s(e.message[1]))])]),e._v(" "),e._m(3)]):e._e(),e._v(" "),o("div",{staticClass:"ts-text is-label has-bottom-padded-small is-required"},[e._v("上課時間")]),e._v(" "),o("div",{staticClass:"ts-grid is-middle-aligned"},[o("div",{staticClass:"column is-5-wide"},[o("div",{staticClass:"ts-select is-fluid"},[o("select",{directives:[{name:"model",rawName:"v-model",value:e.editingCourse.day,expression:"editingCourse.day"}],on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));e.$set(e.editingCourse,"day",t.target.multiple?o:o[0])}}},[o("option",{attrs:{value:"-1",disabled:""}},[e._v("請選擇星期...")]),e._v(" "),e._l(["一","二","三","四","五"],(function(t,i){return o("option",{domProps:{value:i}},[e._v("星期"+e._s(t))])}))],2)])]),e._v(" "),o("div",{staticClass:"column is-5-wide"},[o("div",{staticClass:"ts-select is-fluid"},[o("select",{directives:[{name:"model",rawName:"v-model",value:e.editingCourse.start,expression:"editingCourse.start"}],on:{change:[function(t){var o=Array.prototype.filter.call(t.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));e.$set(e.editingCourse,"start",t.target.multiple?o:o[0])},function(t){return e.checkSection()}]}},[o("option",{attrs:{value:"-1",disabled:""}},[e._v("請選擇起始節次")]),e._v(" "),e._l(e.time_section_full,(function(section){return o("option",{domProps:{value:section}},[e._v("第 "+e._s(section)+" 節")])}))],2)])]),e._v(" "),o("div",{staticClass:"column is-1-wide",staticStyle:{"text-align":"center"}},[e._v("\n\t\t\t\t\t~\n\t\t\t\t\t")]),e._v(" "),o("div",{staticClass:"column is-5-wide"},[o("div",{staticClass:"ts-select is-fluid"},[o("select",{directives:[{name:"model",rawName:"v-model",value:e.editingCourse.end,expression:"editingCourse.end"}],on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));e.$set(e.editingCourse,"end",t.target.multiple?o:o[0])}}},[o("option",{attrs:{value:"-1",disabled:""}},[e._v("請選擇結束節次")]),e._v(" "),e._l(e.time_section_full,(function(section){return o("option",{attrs:{disabled:parseFloat(section)<e.editingCourse.start},domProps:{value:section}},[e._v("第 "+e._s(section)+" 節")])}))],2)])])]),e._v(" "),o("br"),e._v(" "),o("div",{staticClass:"ts-text is-label has-bottom-padded-small is-required"},[e._v("課程名稱")]),e._v(" "),o("div",{staticClass:"ts-input is-fluid"},[o("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.editingCourse.name,expression:"editingCourse.name",modifiers:{trim:!0}}],attrs:{type:"text","area-label":"課程名稱"},domProps:{value:e.editingCourse.name},on:{input:function(t){t.target.composing||e.$set(e.editingCourse,"name",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),e._v(" "),o("br"),e._v(" "),o("div",{staticClass:"ts-text is-label has-bottom-padded-small"},[e._v("上課地點 / 個人備註")]),e._v(" "),o("div",{staticClass:"ts-input is-fluid"},[o("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.editingCourse.classroom,expression:"editingCourse.classroom",modifiers:{trim:!0}}],attrs:{type:"text","area-label":"上課地點 / 個人備註"},domProps:{value:e.editingCourse.classroom},on:{input:function(t){t.target.composing||e.$set(e.editingCourse,"classroom",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),e._v(" "),o("br"),e._v(" "),o("button",{staticClass:"ts-button is-fluid",on:{click:function(t){return e.editCourse()}}},[e._v(e._s("new"===e.editingAction?"新增":"修改"))]),e._v(" "),o("button",{directives:[{name:"show",rawName:"v-show",value:"edit"===e.editingAction,expression:"editingAction === 'edit'"}],staticClass:"ts-button is-negative is-outlined is-fluid has-top-spaced-small",on:{click:function(t){return e.deleteCourse()}}},[e._v("刪除")])],1):e._e()])]),e._v(" "),o("dialog",{staticClass:"ts-modal is-big",attrs:{id:"widgetDialog"}},[o("div",{staticClass:"content"},[o("div",{staticClass:"ts-content"},[o("div",{staticClass:"ts-grid"},[e._m(4),e._v(" "),o("div",{staticClass:"column"},[o("button",{staticClass:"ts-close is-large is-secondary",attrs:{"aria-label":"關閉此彈出視窗"},on:{click:function(t){return e.closeDialog()}}})])])]),e._v(" "),o("div",{staticClass:"ts-divider"}),e._v(" "),o("div",{staticClass:"ts-content"},[o("h2",{staticClass:"ts-header is-large"},[e._v("1. 安裝 Scriptable")]),e._v(" "),e._m(5),e._v(" "),o("h2",{staticClass:"ts-header is-large"},[e._v("2. 挑選喜歡的顏色")]),e._v(" "),o("div",{staticClass:"ts-grid"},[o("div",{staticClass:"column is-8-wide"},[o("div",{staticClass:"widget-demo",style:{background:"linear-gradient(".concat(e.widgetBackgroundColor,", ").concat(e.widgetBackgroundGradient?e.widgetBackgroundColor2:e.widgetBackgroundColor,")"),color:e.widgetColor}},[o("div",{staticClass:"pre"},[e._v("下一堂課")]),e._v(" "),o("div",{staticClass:"title"},[e._v("課程名稱")]),e._v(" "),o("div",{staticClass:"info"},[e._v("13:00 ~ 15:50")])])]),e._v(" "),o("div",{staticClass:"column is-8-wide"},[o("div",{staticClass:"ts-wrap is-middle-aligned has-bottom-spaced-small"},[o("div",{staticClass:"ts-text is-label"},[e._v("背景顏色")]),e._v(" "),o("label",{staticClass:"ts-checkbox is-small"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.widgetBackgroundGradient,expression:"widgetBackgroundGradient"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.widgetBackgroundGradient)?e._i(e.widgetBackgroundGradient,null)>-1:e.widgetBackgroundGradient},on:{change:function(t){var o=e.widgetBackgroundGradient,r=t.target,n=!!r.checked;if(Array.isArray(o)){var c=e._i(o,null);r.checked?c<0&&(e.widgetBackgroundGradient=o.concat([null])):c>-1&&(e.widgetBackgroundGradient=o.slice(0,c).concat(o.slice(c+1)))}else e.widgetBackgroundGradient=n}}}),e._v("\n\t\t\t\t\t\t\t\t漸層\n\t\t\t\t\t\t\t")])]),e._v(" "),o("div",{staticClass:"ts-wrap"},[o("div",[o("div",{staticClass:"ts-input"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.widgetBackgroundColor,expression:"widgetBackgroundColor"}],attrs:{type:"color"},domProps:{value:e.widgetBackgroundColor},on:{input:function(t){t.target.composing||(e.widgetBackgroundColor=t.target.value)}}})])]),e._v(" "),e.widgetBackgroundGradient?o("div",[o("div",{staticClass:"ts-input"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.widgetBackgroundColor2,expression:"widgetBackgroundColor2"}],attrs:{type:"color"},domProps:{value:e.widgetBackgroundColor2},on:{input:function(t){t.target.composing||(e.widgetBackgroundColor2=t.target.value)}}})])]):e._e()]),e._v(" "),o("br"),e._v(" "),o("div",{staticClass:"ts-text is-label has-bottom-spaced-small"},[e._v("文字顏色")]),e._v(" "),o("div",{staticClass:"ts-input"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.widgetColor,expression:"widgetColor"}],attrs:{type:"color"},domProps:{value:e.widgetColor},on:{input:function(t){t.target.composing||(e.widgetColor=t.target.value)}}})])])]),e._v(" "),o("h2",{staticClass:"ts-header is-large",staticStyle:{"margin-bottom":"0"}},[e._v("3. 複製以下程式碼")]),e._v(" "),o("div",{staticClass:"ts-text is-description"},[e._v("\n\t\t\t\t\t課程每次修改後須重新更改一次程式碼"),o("br"),e._v(" "),o("div",{domProps:{innerHTML:e._s(e.message?e.message[1]:"點擊下方區塊即可複製")}})]),e._v(" "),o("div",{staticClass:"ts-input is-solid"},[o("div",{staticClass:"ts-box",staticStyle:{"font-size":".8rem",height:"5rem","overflow-y":"scroll","font-family":"monospace"},attrs:{id:"code0"},on:{click:function(t){return e.copyCode(0)}}},[o("div",{staticClass:"ts-content"},[e._v(e._s(e.scriptableCode))])])]),e._v(" "),o("br"),e._v(" "),e._m(6),e._v(" "),o("h2",{staticClass:"ts-header is-large"},[e._v("5. 在桌面或鎖定畫面新增小工具，選擇 Scriptable")]),e._v(" "),o("h2",{staticClass:"ts-header is-large"},[e._v("6. 長按小工具 > 編輯小工具，Script 設定成你剛剛新增的專案")]),e._v(" "),e._m(7)])])]),e._v(" "),o("dialog",{staticClass:"ts-modal is-large",attrs:{id:"importDialog"}},[o("div",{staticClass:"content"},[o("div",{staticClass:"ts-content"},[o("div",{staticClass:"ts-grid"},[e._m(8),e._v(" "),o("div",{staticClass:"column"},[o("button",{staticClass:"ts-close is-large is-secondary",attrs:{"aria-label":"關閉此彈出視窗"},on:{click:function(t){return e.closeDialog()}}})])])]),e._v(" "),o("div",{staticClass:"ts-divider"}),e._v(" "),o("div",{staticClass:"ts-content"},[o("div",{staticClass:"ts-wrap is-vertical"},[e._m(9),e._v(" "),e._m(10),e._v(" "),o("div",[o("h2",{staticClass:"ts-header is-large",staticStyle:{display:"inline"}},[e._v("3. 看到自己的課表後，在瀏覽器網址列把所有網址刪掉後，貼上以下程式碼：")]),e._v(" "),o("div",{staticClass:"ts-text is-description",domProps:{innerHTML:e._s(e.message?e.message[1]:"點擊下方區塊即可複製")}}),e._v(" "),o("div",{staticClass:"ts-input is-solid"},[o("div",{staticClass:"ts-box",staticStyle:{"font-size":".8rem",height:"5rem","overflow-y":"scroll","font-family":"monospace"},attrs:{id:"code1"},on:{click:function(t){return e.copyCode(1)}}},[o("div",{staticClass:"ts-content"},[e._v(e._s(e.importCodeFile))])])])]),e._v(" "),e._m(11),e._v(" "),e._m(12)])])])]),e._v(" "),o("dialog",{staticClass:"ts-modal is-large",attrs:{id:"icsDialog"}},[o("div",{staticClass:"content"},[o("div",{staticClass:"ts-content"},[o("div",{staticClass:"ts-grid"},[e._m(13),e._v(" "),o("div",{staticClass:"column"},[o("button",{staticClass:"ts-close is-large is-secondary",attrs:{"aria-label":"關閉此彈出視窗"},on:{click:function(t){return e.closeDialog()}}})])])]),e._v(" "),o("div",{staticClass:"ts-divider"}),e._v(" "),o("div",{staticClass:"ts-content"},[o("div",{staticClass:"ts-wrap is-relaxed is-vertical"},[o("div",[e._m(14),e._v(" "),o("div",{staticClass:"ts-wrap"},[o("label",{staticClass:"ts-checkbox"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.icsReminders,expression:"icsReminders"}],attrs:{type:"checkbox",value:"10"},domProps:{checked:Array.isArray(e.icsReminders)?e._i(e.icsReminders,"10")>-1:e.icsReminders},on:{change:function(t){var o=e.icsReminders,r=t.target,n=!!r.checked;if(Array.isArray(o)){var c=e._i(o,"10");r.checked?c<0&&(e.icsReminders=o.concat(["10"])):c>-1&&(e.icsReminders=o.slice(0,c).concat(o.slice(c+1)))}else e.icsReminders=n}}}),e._v("\n\t\t\t\t\t\t\t\t10 分鐘前\n\t\t\t\t\t\t\t")]),e._v(" "),o("label",{staticClass:"ts-checkbox"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.icsReminders,expression:"icsReminders"}],attrs:{type:"checkbox",value:"5"},domProps:{checked:Array.isArray(e.icsReminders)?e._i(e.icsReminders,"5")>-1:e.icsReminders},on:{change:function(t){var o=e.icsReminders,r=t.target,n=!!r.checked;if(Array.isArray(o)){var c=e._i(o,"5");r.checked?c<0&&(e.icsReminders=o.concat(["5"])):c>-1&&(e.icsReminders=o.slice(0,c).concat(o.slice(c+1)))}else e.icsReminders=n}}}),e._v("\n\t\t\t\t\t\t\t\t5 分鐘前\n\t\t\t\t\t\t\t")]),e._v(" "),o("label",{staticClass:"ts-checkbox"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.icsReminders,expression:"icsReminders"}],attrs:{type:"checkbox",value:"0"},domProps:{checked:Array.isArray(e.icsReminders)?e._i(e.icsReminders,"0")>-1:e.icsReminders},on:{change:function(t){var o=e.icsReminders,r=t.target,n=!!r.checked;if(Array.isArray(o)){var c=e._i(o,"0");r.checked?c<0&&(e.icsReminders=o.concat(["0"])):c>-1&&(e.icsReminders=o.slice(0,c).concat(o.slice(c+1)))}else e.icsReminders=n}}}),e._v("\n\t\t\t\t\t\t\t\t課程開始時\n\t\t\t\t\t\t\t")])])]),e._v(" "),o("div",{staticClass:"ts-grid is-middle-aligned"},[o("div",{staticClass:"column is-8-wide"},[o("div",{staticClass:"ts-text is-label has-bottom-spaced-small"},[e._v("課表開始日期")]),e._v(" "),o("div",{staticClass:"ts-input is-fluid"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.icsStartDate,expression:"icsStartDate"}],attrs:{type:"date"},domProps:{value:e.icsStartDate},on:{input:function(t){t.target.composing||(e.icsStartDate=t.target.value)}}})])]),e._v(" "),o("div",{staticClass:"column is-8-wide"},[o("div",{staticClass:"ts-text is-label has-bottom-spaced-small"},[e._v("課表結束日期")]),e._v(" "),o("div",{staticClass:"ts-input is-fluid"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.icsEndDate,expression:"icsEndDate"}],attrs:{type:"date",min:e.icsStartDate},domProps:{value:e.icsEndDate},on:{input:function(t){t.target.composing||(e.icsEndDate=t.target.value)}}})])]),e._v(" "),o("div",{staticClass:"column is-16-wide"},[o("div",{staticClass:"ts-text is-description"},[e._v("共 "+e._s(e.icsWeek)+" 週")])])]),e._v(" "),o("div",[o("a",{staticClass:"ts-button is-fluid",class:{"is-disabled":!e.icsEndDate||!e.icsStartDate||e.icsEndDate<e.icsStartDate},attrs:{href:e.icsUrl}},[e._v("匯出")]),e._v(" "),e._m(15)])])])])]),e._v(" "),o("dialog",{staticClass:"ts-modal is-large",attrs:{id:"colorDialog"}},[o("div",{staticClass:"content"},[o("div",{staticClass:"ts-content"},[o("div",{staticClass:"ts-grid"},[e._m(16),e._v(" "),o("div",{staticClass:"column"},[o("button",{staticClass:"ts-close is-large is-secondary",attrs:{"aria-label":"關閉此彈出視窗"},on:{click:function(t){return e.closeDialog()}}})])])]),e._v(" "),o("div",{staticClass:"ts-divider"}),e._v(" "),o("div",{staticClass:"picker-container",style:{background:e.myCoursesSetting.backgroundColor}},[o("div",{staticStyle:{padding:"2rem",background:"var(--ts-gray-100)","border-radius":"var(--ts-border-radius-container)"},attrs:{id:"picker"}}),e._v(" "),o("br"),e._v(" "),o("div",{staticClass:"ts-input is-large"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.myCoursesSetting.backgroundColorHex,expression:"myCoursesSetting.backgroundColorHex"}],staticStyle:{"text-transform":"uppercase"},attrs:{type:"text",placeholder:"#FFFFFF",maxlength:"7"},domProps:{value:e.myCoursesSetting.backgroundColorHex},on:{input:[function(t){t.target.composing||e.$set(e.myCoursesSetting,"backgroundColorHex",t.target.value)},e.updateBackgroundColor],blur:e.validateAndFormatColor}})])])])]),e._v(" "),o("loading",{directives:[{name:"show",rawName:"v-show",value:e.loading||e.loading_get,expression:"loading || loading_get"}]})],1)}),[function(){var t=this,e=t._self._c;return e("div",{staticClass:"ts-text is-description mobile-hidden"},[e("span",{staticClass:"ts-badge has-bottom-spaced-small is-small is-dense"},[t._v("提示")]),t._v(" "),e("div",{staticClass:"ts-list is-small is-unordered"},[e("div",{staticClass:"item"},[t._v("這裡是用來製作個人課表的，「收藏的課程」若有修改，請清空後重新同步！")]),t._v(" "),e("div",{staticClass:"item"},[t._v("點擊空白處可新增課程")]),t._v(" "),e("div",{staticClass:"item"},[t._v("點擊課程可修改資訊")]),t._v(" "),e("div",{staticClass:"item"},[t._v("可以自訂主題或背景！")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"ts-box has-bottom-spaced has-top-spaced-large"},[e("div",{staticClass:"ts-content"},[e("div",{staticClass:"ts-text is-description"},[e("span",{staticClass:"ts-badge has-bottom-spaced-small is-small is-dense"},[t._v("提示")]),t._v(" "),e("div",{staticClass:"ts-list is-small is-unordered"},[e("div",{staticClass:"item"},[t._v("這裡是用來製作個人課表的，「收藏的課程」若有修改，請清空後重新同步！")]),t._v(" "),e("div",{staticClass:"item"},[t._v("點擊空白處可新增課程")]),t._v(" "),e("div",{staticClass:"item"},[t._v("點擊課程可修改資訊")]),t._v(" "),e("div",{staticClass:"item"},[t._v("可以自訂主題或背景！")])])])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"ts-content"},[e("div",{staticClass:"ts-text is-description has-bottom-padded-small"},[t._v("贊助商")]),t._v(" "),e("script",{attrs:{async:"",src:"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5900703871265800",crossorigin:"anonymous",onerror:"document.querySelector('.ad .ts-content').innerHTML='<div class=\"ts-text is-description has-bottom-padded-small\">贊助商</div><div class=\"ts-text is-secondary is-center-aligned has-vertically-padded\">太無情了吧，擋廣告 😭<br>加入白名單，救救開發者 🙏</div>';"}}),t._v(" "),e("ins",{staticClass:"adsbygoogle",staticStyle:{display:"block","text-align":"center"},attrs:{"data-ad-layout":"in-article","data-ad-format":"fluid","data-ad-client":"ca-pub-5900703871265800","data-ad-slot":"3164180037"}}),t._v(" "),e("script",[t._v("\n\t\t\t\t\t\t(adsbygoogle = window.adsbygoogle || []).push({});\n\t\t\t\t\t")])])},function(){var t=this._self._c;return t("div",{staticClass:"symbol"},[t("span",{staticClass:"ts-icon is-circle-exclamation-icon"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"column is-fluid"},[e("div",{staticClass:"ts-header"},[t._v("安裝 iOS 小工具")]),t._v(" "),e("div",{staticClass:"ts-text is-description"},[t._v("可以讓你在桌面或鎖定畫面上看到下一堂是什麼課，點擊還可以查看課程詳細資料！")])])},function(){var t=this._self._c;return t("a",{attrs:{href:"https://apps.apple.com/tw/app/scriptable/id1405459188"}},[t("img",{staticStyle:{width:"150px"},attrs:{src:"https://i.imgur.com/Tq43Fdb.png"}})])},function(){var t=this,e=t._self._c;return e("h2",{staticClass:"ts-header is-large",staticStyle:{display:"inline"}},[t._v("4. 開啟 Scriptable，按 "),e("span",{staticClass:"ts-icon is-circle-plus-icon"}),t._v("，貼上程式碼，按 "),e("span",[t._v("Done")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"ts-text is-description"},[t._v("\n\t\t\t\t\t還是看不懂的話就看一下"),e("a",{attrs:{href:"https://www.youtube.com/watch?v=QUG2U66lzOM",target:"_blank"}},[t._v("影片")]),t._v("吧～\n\t\t\t\t")])},function(){var t=this._self._c;return t("div",{staticClass:"column is-fluid"},[t("div",{staticClass:"ts-header"},[this._v("從學校系統匯入")])])},function(){var t=this,e=t._self._c;return e("div",[e("h2",{staticClass:"ts-header is-large",staticStyle:{display:"inline"}},[t._v("1. 請至"),e("a",{attrs:{href:"https://portal.mcut.edu.tw/",target:"_blank",rel:"nofollow"}},[t._v("校園入口網")]),t._v("，前往應用系統 > 學生資訊查詢系統")]),t._v(" "),e("div",{staticClass:"ts-text is-description"},[t._v("請在手機或電腦的瀏覽器上執行，不要使用明志 App")])])},function(){var t=this._self._c;return t("div",[t("h2",{staticClass:"ts-header is-large",staticStyle:{display:"inline"}},[this._v("2. 選擇課程查詢 > 課表查詢")])])},function(){var t=this,e=t._self._c;return e("div",[e("h2",{staticClass:"ts-header is-large",staticStyle:{display:"inline"}},[t._v("4. "),e("span",{staticClass:"ts-badge is-end-spaced is-negative"},[t._v("重要 !")]),t._v("在最前面加上 "),e("span",{staticClass:"ts-text is-code",staticStyle:{"font-family":"monospace"}},[t._v("javascript:")])]),t._v(" "),e("div",{staticClass:"ts-text is-description"},[t._v("請自行輸入，用複製貼上的話可能會失敗")])])},function(){var t=this,e=t._self._c;return e("div",[e("h2",{staticClass:"ts-header is-large",staticStyle:{display:"inline"}},[t._v("5. 按下 Enter/送出後，課表就會匯入了！")]),t._v(" "),e("div",{staticClass:"ts-text is-description"},[t._v("\n\t\t\t\t\t\t\t如果看到 "),e("span",{staticClass:"ts-icon is-magnifying-glass-icon"}),t._v(" 和 "),e("span",{staticClass:"ts-icon is-earth-asia-icon"}),t._v(" 兩個選項，請選擇 "),e("span",{staticClass:"ts-icon is-earth-asia-icon"}),t._v(" 那一個。如果只有 "),e("span",{staticClass:"ts-icon is-magnifying-glass-icon"}),t._v("，請重新檢查是否輸入正確！\n\t\t\t\t\t\t")]),t._v(" "),e("img",{staticStyle:{width:"100%"},attrs:{src:"https://i.imgur.com/ZKRQvC7.jpeg"}})])},function(){var t=this._self._c;return t("div",{staticClass:"column is-fluid"},[t("div",{staticClass:"ts-header"},[this._v("存到行事曆")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"ts-text is-label has-bottom-spaced-small"},[t._v("\n\t\t\t\t\t\t\t提醒\n\t\t\t\t\t\t\t"),e("span",{staticClass:"ts-text is-secondary"},[t._v("（可設定的提醒數量會因手機品牌與行事曆軟體的不同而有所差異）")])])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{color:"var(--ts-gray-600)","font-size":".8rem"}},[e("div",{staticClass:"ts-header has-top-spaced"},[t._v("使用方式")]),t._v("\n\t\t\t\t\t\t\tApple 日曆\n\t\t\t\t\t\t\t"),e("div",{staticClass:"ts-list is-ordered"},[e("li",[t._v("點擊匯出後，會出現「有可用的日曆檔案」，點擊「繼續」")]),t._v(" "),e("li",[t._v("預覽課表，確認無誤後，點擊「全部加入」")])]),t._v("\n\t\t\t\t\t\t\tGoogle 日曆\n\t\t\t\t\t\t\t"),e("div",{staticClass:"ts-list is-ordered"},[e("li",[t._v("點擊匯出後，前往下載，開啟剛剛下載的檔案")]),t._v(" "),e("li",[t._v("預覽課表，確認無誤後，點擊「新增全部」")])]),t._v("\n\t\t\t\t\t\t\tTimeTree\n\t\t\t\t\t\t\t"),e("div",{staticClass:"ts-list is-ordered"},[e("li",[t._v("TimeTree 無法直接匯入，但仍可使用其他方法，請參考"),e("a",{attrs:{target:"_blank",rel:"nofollow",href:"https://support.timetreeapp.com/hc/zh-tw/articles/360000629341-%E5%B8%8C%E6%9C%9B%E4%BD%BF%E7%94%A8%E5%85%B6%E4%BB%96%E6%97%A5%E6%9B%86-%E5%A6%82-Google-%E6%97%A5%E6%9B%86"}},[t._v("官方說明")])])])])},function(){var t=this._self._c;return t("div",{staticClass:"column is-fluid"},[t("div",{staticClass:"ts-header"},[this._v("選擇背景顏色")])])}],!1,null,null,null);e.default=component.exports;installComponents(component,{Loading:o(359).default})}}]);